class Node {
  constructor(data, next = null) {
    this.data = data;
    this.next = next;
  }
}

class LinkedList {
  constructor() {
    this.head = null;
    this.count = 0;
  }

  // ðŸ“Œ printAll
  printAll() {
    //ë¨¼ì € currentNode ë³€ìˆ˜ê°€ headë¥¼ ê°€ë¦¬í‚¤ê²Œí•œë‹¤.
    let currentNode = this.head;
    // 1ï¸âƒ£ textë³€ìˆ˜ì— ë¬¸ìžì—´ë¡œ ëŒ€ê´„í˜¸ë¥¼ ë„£ì–´ì¤€ë‹¤.
    let text = "[";
    // ë¦¬ìŠ¤íŠ¸ì˜ ëê¹Œì§€ ìˆœíšŒí•˜ëŠ”ë° currentNodeê°€ nullì´ ë  ë•Œê¹Œì§€ ê³„ì† next ë…¸ë“œë¥¼ ì°¸ì¡°í•´ì£¼ë©´ ëœë‹¤.
    while (currentNode != null) {
      // 2ï¸âƒ£text ë³€ìˆ˜ì— currentNodeì˜ ë°ì´í„°ë¥¼ ì €ìž¥í•´ì¤€ë‹¤.
      text += currentNode.data;
      // currentNodeë¥¼ currentNodeì˜ nextë…¸ë“œë¡œ ê°€ë¦¬í‚¨ë‹¤.
      currentNode = currentNode.next;

      // 3ï¸âƒ£ currentNodeê°€ ë§ˆì§€ë§‰ ë°ì´í„°ê°€ ì•„ë‹ˆë¼ë©´ ì½¤ë§ˆë¡œ êµ¬ë¶„í•´ì¤€ë‹¤
      if (currentNode != null) {
        // ëª¨ë“  ë…¸ë“œë¥¼ ìˆœíšŒí–ˆë‹¤ë©´ textì—ëŠ” "[0,1,2"ì™€ ê°™ì´ ì €ìž¥ë˜ì–´ìžˆë‹¤.
        text += ", ";
      }
    }
    // text ë³€ìˆ˜ì— ë‹«ëŠ” ëŒ€ê´„í˜¸ë¥¼ ë„£ì–´ì„œ ëª¨ì–‘ì„ ì™„ì„±ì‹œì¼œì¤€ë‹¤.
    text += "]";
    // text ë³€ìˆ˜ ì¶œë ¥
    console.log(text);
  }

  // ðŸ“Œ clear
  // headê°€ nullì„ ê°€ë¦¬í‚¤ê²Œ í•´ì„œ ì°¸ì¡°í•˜ëŠ” ê²ƒì´ ì—†ê²Œ ë§Œë“¤ì–´ì£¼ê³ 
  clear() {
    this.head = null;
    // countë¥¼ 0ìœ¼ë¡œ ë§Œë“¤ì–´ì£¼ë©´ ë¦¬ìŠ¤íŠ¸ëŠ” ë¹„ì›Œì§„ë‹¤.
    this.count = 0;
  }

  // ðŸ“Œ insertAt
  insertAt(index, data) {
    // ì˜ˆì™¸ì²˜ë¦¬
    if (index > this.count || index < 0) {
      throw new Error("ë²”ìœ„ë¥¼ ë„˜ì–´ê°”ìŠµë‹ˆë‹¤.");
    }
    // ì‚½ìž…í•  ë…¸ë“œ ìƒì„±
    let newNode = new Node(data);
    // if ë¬¸ì—ì„œ ë¦¬ìŠ¤íŠ¸ì˜ ê°€ìž¥ ì•žë¶€ë¶„ì— ì‚½ìž…í•˜ëŠ” ê²½ìš°, ì¦‰ ì¸ë±ìŠ¤ê°€ 0ì¸ ê²½ìš°ë¥¼ ì²˜ë¦¬í•˜ê³ 
    if (index == 0) {
      // ìƒˆë¡œ ìƒì„±í•œ ë…¸ë“œì˜ nextê°€ headë¥¼ ê°€ë¦¬í‚¤ê²Œ í•˜ê³ ,
      newNode.next = this.head;
      // ìƒˆë¡œ ìƒì„±í•œ ë…¸ë“œë¥¼ headë¡œ ë³€ê²½í•œë‹¤.
      this.head = newNode;
      // else ë¬¸ì—ì„œëŠ” ê°€ìž¥ ì•žë¶€ë¶„ ì‚½ìž…ì„ ì œì™¸í•œ ê²½ìš°ë¥¼ ì²˜ë¦¬í•œë‹¤.
      // ì›í•˜ëŠ” ì¸ë±ìŠ¤ê¹Œì§€ ë…¸ë“œë¥¼ íƒ€ê³  ë“¤ì–´ê°€ì„œ ìƒˆë¡œ ì‚½ìž…í•˜ëŠ” ê²½ìš°
      // ë§Œì•½ ì¸ë±ìŠ¤ 3ì— ì‚½ìž…í•œë‹¤ë©´ head ë…¸ë“œì—ì„œ ì„¸ ë²ˆì§¸ ë–¨ì–´ì§„ ë…¸ë“œì— ì‚½ìž…í•˜ëŠ” ê²½ìš°ì´ë‹¤.
      // currentNodeë¡œ ì„¸ ë²ˆì§¸ ë–¨ì–´ì§„ ë…¸ë“œ ì „ê¹Œì§€ ì´ë™í•˜ê³  newNodeê°€ curretNodeê°€ ê°€ë¦¬í‚¤ë˜ ë…¸ë“œ,
      // ì¦‰ ì„¸ ë²ˆì§¸ ë…¸ë“œ(9)ë¥¼ ê°€ë¦¬í‚¤ê²Œ í•œë‹¤.
      // ê·¸ë¦¬ê³  currentNode(7)ê°€ ìƒˆë¡œìš´ ë…¸ë“œ(data)ë¥¼ ê°€ë¦¬í‚¤ê²Œ í•˜ë©´ ëë‚œë‹¤.
    } else {
      // ë¨¼ì € ì‚½ìž…í•˜ë ¤ëŠ” ë…¸ë“œ ë°”ë¡œ ì „ê¹Œì§€ ê°€ê¸° ìœ„í•œ ë³€ìˆ˜ë¥¼ í•˜ë‚˜ ë§Œë“ ë‹¤.
      // headì—ì„œ ì‹œìž‘í•˜ê¸° ë•Œë¬¸ì— headë¡œ ì´ˆê¸°í™”í•´ì¤€ë‹¤.
      let currentNode = this.head;
      // ëª©í‘œ ì¸ë±ìŠ¤ ë°”ë¡œ ì „ê¹Œì§€ nextë¥¼ ì´ìš©í•´ currentNodeë¥¼ ì´ë™ì‹œí‚¨ë‹¤.
      // ë§Œì•½ ëª©í‘œ ì¸ë±ìŠ¤ê°€ 3ì´ë¼ê³  í•˜ë©´ currentNodeëŠ” ë‘ ë²ˆì§¸ ë–¨ì–´ì§„ ë…¸ë“œ(7)ê¹Œì§€ ì ‘ê·¼í•œë‹¤.
      for (let i = 0; i < index - 1; i++) {
        currentNode = currentNode.next;
      }
      // ëª©í‘œ ì¸ë±ìŠ¤ì˜ ë°”ë¡œ ì „ ë…¸ë“œê¹Œì§€ ì™”ë‹¤ë©´ ì´ì œ ê°„ë‹¨í•˜ë‹¤.
      // ìƒˆë¡œìš´ ë…¸ë“œê°€ currentNodeì˜ next ë…¸ë“œë¥¼ ê°€ë¦¬í‚¤ê³ 
      newNode.next = currentNode.next;
      // currentNode(7)ê°€ ìƒˆë¡œìš´ ë…¸ë“œë¥¼ ê°€ë¦¬í‚¤ë©´ ëœë‹¤.
      currentNode.next = newNode;
    }
    // ìƒˆë¡œìš´ ë…¸ë“œê°€ ì‚½ìž…ë˜ì—ˆìœ¼ë‹ˆ if ë¬¸ê³¼ else ë¬¸ ë°–ì— countë¥¼ í•˜ë‚˜ ì˜¬ë ¤ì¤€ë‹¤.
    this.count++;
  }

  //  1ï¸âƒ£ ë¨¼ì € í•¨ìˆ˜ë¥¼ ì •ì˜í•´ì¤€ë‹¤.
  insertLast(data) {
    // 2ï¸âƒ£ insertAt() í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì„œ indextì— ë¦¬ìŠ¤íŠ¸ì˜ í¬ê¸°ì¸ countë¥¼ ë„£ì–´ ê°€ìž¥ ë’¤ì— ë°ì´í„°ë¥¼ ì‚½ìž…í•œë‹¤.
    this.insertAt(this.count, data);
  }

  deleteAt(index) {
    // 1ï¸âƒ£ insertAt() í•¨ìˆ˜ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ì—ëŸ¬ì²˜ë¦¬ë¥¼ í•´ì¤€ë‹¤.
    // ë¦¬ìŠ¤íŠ¸ì˜ í¬ê¸°ë¥¼ ë„˜ì–´ì„œë©´ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.
    if (index >= this.count || index < 0) {
      throw new Error("ì œê±°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
    }

    // 2ï¸âƒ£ ë…¸ë“œë¥¼ ìˆœíšŒí•  ë³€ìˆ˜(currentNode)ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.
    let currentNode = this.head;
    // insertAt() í•¨ìˆ˜ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ë‘ ê°€ì§€ ìƒí™©ì„ ê³ ë ¤í•œë‹¤. ifë¬¸ ì‚¬ìš©
    // 1) head ë…¸ë“œ, ì¦‰ ì²« ë²ˆì§¸ ë…¸ë“œë¥¼ ì œê±°í•˜ëŠ” ìƒí™©
    if (index == 0) {
      // ì‚­ì œëœ ë…¸ë“œë¥¼ ë¦¬í„´í•˜ê¸° ìœ„í•´ ì‚­ì œë  ë…¸ë“œë¥¼ ì €ìž¥
      let deletedNode = this.head;
      // headë¥¼ headì˜ next ë…¸ë“œë¡œ ì„¤ì •í•´ì¤€ë‹¤.
      this.head = this.head.next;
      // ì‚­ì œëìœ¼ë‹ˆ countë„ í•˜ë‚˜ ì¤„ì—¬ì¤€ë‹¤.
      this.count--;
      // ì‚­ì œëœ ë…¸ë“œ(deletedNode)ëŠ” ë¦¬í„´í•´ì¤€ë‹¤.
      return deletedNode;
    } else {
      // 2) ì²« ë²ˆì§¸ ë…¸ë“œë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ë…¸ë“œë¥¼ ì œê±°í•˜ëŠ” ìƒí™©
      // for ë¬¸ë“œë¡œ ì œê±°í•  ë…¸ë“œ ì´ì „ ë…¸ë“œê¹Œì§€ ìˆœíšŒí•œë‹¤.
      for (let i = 0; i < index - 1; i++) {
        currentNode = currentNode.next;
        //forë¬¸ì„ ë§ˆì¹˜ë©´ currentNodeëŠ” ì œê±°í•  ë…¸ë“œ(7)ì˜ ì´ì „ ë…¸ë“œë¥¼ ê°€ë¦¬í‚¨ë‹¤.
      }
      // ì œê±°í•œ ë…¸ë“œëŠ” ë°˜í™˜ë˜ì–´ì•¼ í•˜ë¯€ë¡œ ë³€ìˆ˜ì— ì €ìž¥í•´ì¤€ë‹¤.
      let deletedNode = currentNode.next;
      // ì´ì œ ì œê±°í•  ë…¸ë“œì˜ ì´ì „ ë…¸ë“œ(currentNode)ê°€ ì œê±°í•  ë…¸ë“œì˜ nextë…¸ë“œ(9)ë¥¼ ê°€ë¦¬í‚¤ê²Œ í•´ì£¼ê² ë‹¤.
      currentNode.next = currentNode.next.next;
      // ì‚­ì œë¥¼ í–ˆìœ¼ë‹ˆ countë¥¼ í•˜ë‚˜ ì¤„ì—¬ì£¼ê³  ì‚­ì œë˜ ë…¸ë“œë¥¼ ë¦¬í„´í•´ì¤€ë‹¤.
      this.count--;
      return deletedNode;
    }
  }

  deleteLast() {
    //1ï¸âƒ£ deleteAt í•¨ìˆ˜ í˜¸ì¶œí•˜ëŠ”ë° indexëŠ” ë¦¬ìŠ¤íŠ¸ì˜ ì¹´ìš´í„°ë³´ë‹¤ 1 ìž‘ì€ ê°’ì„ ë„˜ê²¨ì¤€ë‹¤.
    // ë§Œì•½ ë°ì´í„°ê°€ ì„¸ ê°œë¼ë©´ 2ë²ˆ ì¸ë±ìŠ¤ê°€ ë§ˆì§€ë§‰ ë°ì´í„°ì´ê¸° ë•Œë¬¸ì´ë‹¤.
    return this.deleteAt(this.count - 1);
  }

  // ë§¤ê°œë³€ìˆ˜ëŠ” ì½ìœ¼ë ¤ëŠ” Indexë¥¼ ë„£ì–´ì¤€ë‹¤.
  getNodeAt(index) {
    // ì½ê³ ìž í•˜ëŠ” ì¸ë±ìŠ¤ê°€ ë¦¬ìŠ¤íŠ¸ ë²”ìœ„ë¥¼ ë„˜ì–´ê°ˆ ë•Œ ì—ëŸ¬ë¥¼ ë°œìƒì‹œì¼œì£¼ê² ë‹¤.
    if (index >= this.count || index < 0) {
      throw new Error("ë²”ìœ„ë¥¼ ë„˜ì–´ê°”ìŠµë‹ˆë‹¤.");
    }
    // ë¦¬ìŠ¤íŠ¸ë¥¼ ìˆœíšŒí•  ë³€ìˆ˜ë¥¼ ë§Œë“¤ê³  headì™€ ê°™ì€ ë…¸ë“œë¥¼ ê°€ë¦¬í‚¨ë‹¤.
    let currentNode = this.head;
    // ì´ì œ currentNodeê°€ í•´ë‹¹ ì¸ë±ìŠ¤ê¹Œì§€ ìˆœíšŒí•œë‹¤.
    for (let i = 0; i < index; i++) {
      currentNode = currentNode.next;
    }
    // currentNodeë¥¼ ë¦¬í„´í•´ì£¼ë©´ ëì´ë‹¤.
    return currentNode;
  }
}

export { Node, LinkedList };
